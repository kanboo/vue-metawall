import{r as U,o as l,c as i,a as s,b as y,w as j,d,v as m,t as _,e as p,n as Y,f as H,p as Z,h as O,i as W,_ as G,I as J,j as K,k as Q,l as q,q as D,s as $,x as ee,y as se}from"./index.917bd756.js";import{c as oe,a as u,d as re,u as ae,b as f}from"./object.5ca6acb0.js";import{_ as te}from"./img.0214c2a1.js";const ne="USER_ALREADY_EXISTS";var le={USER_ALREADY_EXISTS:ne};const a=t=>(Z("data-v-d7575e26"),t=t(),O(),t),ie={class:"register bg_pattern"},de={class:"container"},ce={class:"flex justify-center md:justify-content items-center min-h-screen"},me={class:"border-2 border-black bg-gray flex flex-col md:flex-row justify-between gap-4 sm:gap-12 shadow-light px-4 py-6 md:py-16 md:px-12"},_e=a(()=>s("img",{src:te,alt:"banner",class:"hidden md:block cursor-pointer"},null,-1)),pe={class:"w-full"},ue=a(()=>s("legend",{class:"mb-9 cursor-pointer"},[s("h1",{class:"text-center font-logo text-primary text-4xl md:text-6xl"},"MetaWall"),s("p",{class:"text-center font-bold text-xl md:text-2xl"},"\u8A3B\u518A")],-1)),fe={class:"mb-8 space-y-4"},ge={class:"form-control"},we=a(()=>s("label",{for:"name"},null,-1)),he={key:0,class:"form-errorMsg register-style"},ye={class:"form-control"},be=a(()=>s("label",{for:"email"},null,-1)),xe={key:0,class:"form-errorMsg register-style"},ve={class:"form-control"},Se=a(()=>s("label",{for:"password"},null,-1)),ke={key:0,class:"form-errorMsg register-style"},Ee={class:"form-control"},Pe=a(()=>s("label",{for:"confirmPassword"},null,-1)),Re={key:0,class:"form-errorMsg register-style"},Ie=["disabled"],Le=a(()=>s("span",{class:"mr-2"},"\u8A3B\u518A",-1)),Te=W(" \u767B\u5165 ");function Ve(t,o,b,e,x,v){const c=U("router-link"),g=U("IconLoading");return l(),i("div",ie,[s("div",de,[s("section",ce,[s("div",me,[y(c,{to:{name:"Home"},class:"self-center flex justify-center items-center md:w-1/3 lg:w-auto"},{default:j(()=>[_e]),_:1}),s("form",pe,[ue,s("div",fe,[s("div",ge,[we,d(s("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=r=>e.name=r),class:"form-input",name:"name",placeholder:"Name"},null,512),[[m,e.name]]),e.errors.name?(l(),i("span",he,_(e.errors.name),1)):p("",!0)]),s("div",ye,[be,d(s("input",{type:"mail","onUpdate:modelValue":o[1]||(o[1]=r=>e.email=r),class:"form-input font-mono",name:"email",placeholder:"Email",onBlur:o[2]||(o[2]=(...r)=>e.handleEmailBlur&&e.handleEmailBlur(...r))},null,544),[[m,e.email]]),e.errors.email?(l(),i("span",xe,_(e.errors.email),1)):p("",!0)]),s("div",ve,[Se,d(s("input",{type:"password","onUpdate:modelValue":o[3]||(o[3]=r=>e.password=r),class:"form-input font-mono",name:"password",placeholder:"Password"},null,512),[[m,e.password]]),e.errors.password?(l(),i("span",ke,_(e.errors.password),1)):p("",!0)]),s("div",Ee,[Pe,d(s("input",{type:"password","onUpdate:modelValue":o[4]||(o[4]=r=>e.confirmPassword=r),class:"form-input font-mono",name:"confirmPassword",placeholder:"Confirm Password"},null,512),[[m,e.confirmPassword]]),e.errors.confirmPassword?(l(),i("span",Re,_(e.errors.confirmPassword),1)):p("",!0)])]),s("button",{type:"button",class:Y(["flex justify-center items-center btn btn-primary mb-4 btn-register",e.getRegisterClass]),disabled:e.isScreenLoading,onClick:o[5]||(o[5]=(...r)=>e.onSubmit&&e.onSubmit(...r))},[Le,d(y(g,{class:"h-6 w-6 text-white ml-2"},null,512),[[H,e.isScreenLoading]])],10,Ie),y(c,{to:{name:"Login"},class:"block text-center"},{default:j(()=>[Te]),_:1})])])])])])}const Ae={name:"Register",components:{IconLoading:J},setup(){const t=K(),o={email:"",name:"",password:"",confirmPassword:""},b=oe({name:u().required("\u8ACB\u586B\u5BEB \u540D\u7A31").min(2,"\u540D\u7A31\u6700\u5C11 2 \u500B\u5B57\u5143"),email:u().required("\u8ACB\u586B\u5BEB \u90F5\u4EF6\u4FE1\u7BB1").email("\u4FE1\u7BB1\u683C\u5F0F\u6709\u8AA4"),password:u().required("\u8ACB\u586B\u5BEB \u5BC6\u78BC").matches(/^(?=.*[a-zA-Z])(?=.*\d)[a-zA-Z0-9]{8,}$/,"\u5BC6\u78BC\u9700\u81F3\u5C11 8 \u78BC\u4EE5\u4E0A\uFF0C\u4E26\u4E2D\u82F1\u6DF7\u5408\uFF0C\u4E0D\u53EF\u4EE5\u8F38\u5165\u7A7A\u767D\u5B57\u5143\u3001\u7279\u6B8A\u7B26\u865F"),confirmPassword:u().required("\u8ACB\u586B\u5BEB \u78BA\u8A8D\u5BC6\u78BC").oneOf([re("password"),null],"\u5BC6\u78BC\u8F38\u5165\u4E0D\u4E00\u81F4")}),{errors:e,handleSubmit:x}=ae({validationSchema:b,initialValues:o}),{value:v}=f("name"),{value:c}=f("email"),{value:g}=f("password"),{value:r}=f("confirmPassword"),N=Q(()=>q.value?["opacity-50","cursor-not-allowed","disabled:bg-gray-400","disabled:text-black"]:[]),z=async w=>{console.log("handleEmailBlur",w.target.value)},F=x(async(w,X)=>{var S,k,E,P,R,I,L,T,V,A,B,C;try{D(!0);const n=await $.post("/api/v1/auth/register",w),M=(E=(k=(S=n.data)==null?void 0:S.data)==null?void 0:k.user)!=null?E:null,h=(I=(R=(P=n.data)==null?void 0:P.data)==null?void 0:R.token)!=null?I:null;ee(M),se(h),t.push({name:"Home"})}catch(n){if(((V=(T=(L=n.response)==null?void 0:L.data)==null?void 0:T.errorType)!=null?V:null)===le.USER_ALREADY_EXISTS){const h=(C=(B=(A=n.response)==null?void 0:A.data)==null?void 0:B.message)!=null?C:"\u6B64 Mail \u5DF2\u8A3B\u518A\uFF01";X.setFieldError("email",h)}else console.error(n)}finally{D(!1)}});return{errors:e,name:v,email:c,password:g,confirmPassword:r,isScreenLoading:q,getRegisterClass:N,handleEmailBlur:z,onSubmit:F}}};var Ue=G(Ae,[["render",Ve],["__scopeId","data-v-d7575e26"]]);export{Ue as default};
