import{r as q,o as l,c as i,a as s,b as y,w as N,d,v as m,t as p,e as _,n as z,f as O,p as W,g as G,h as J,_ as K,i as Q,j as Y,k as U,m as A,q as Z,s as $,x as ee}from"./index.bf0ea4cb.js";import{c as se,a as u,d as oe,u as re,b as f}from"./object.8e902ecb.js";import{_ as te,I as ae}from"./img.96903262.js";const ne="EMAIL_EXISTS";var le={EMAIL_EXISTS:ne};const t=a=>(W("data-v-828dd938"),a=a(),G(),a),ie={class:"register bg_pattern"},de={class:"container"},ce={class:"flex justify-center md:justify-content items-center min-h-screen"},me={class:"border-2 border-black bg-gray flex flex-col md:flex-row justify-between gap-4 sm:gap-12 shadow-light px-4 py-6 md:py-16 md:px-12"},pe=t(()=>s("img",{src:te,alt:"banner",class:"hidden md:block cursor-pointer"},null,-1)),_e={class:"w-full"},ue=t(()=>s("legend",{class:"mb-9 cursor-pointer"},[s("h1",{class:"text-center font-logo text-primary text-4xl md:text-6xl"},"MetaWall"),s("p",{class:"text-center font-bold text-xl md:text-2xl"},"\u8A3B\u518A")],-1)),fe={class:"mb-8 space-y-4"},ge={class:"form-control"},we=t(()=>s("label",{for:"name"},null,-1)),he={key:0,class:"form-errorMsg register-style"},ye={class:"form-control"},be=t(()=>s("label",{for:"email"},null,-1)),xe={key:0,class:"form-errorMsg register-style"},ve={class:"form-control"},Se=t(()=>s("label",{for:"password"},null,-1)),ke={key:0,class:"form-errorMsg register-style"},Ee={class:"form-control"},Ie=t(()=>s("label",{for:"confirmPassword"},null,-1)),Pe={key:0,class:"form-errorMsg register-style"},Le=["disabled"],Me=t(()=>s("span",{class:"mr-2"},"\u8A3B\u518A",-1)),Te=J(" \u767B\u5165 ");function Ve(a,o,b,e,x,v){const c=q("router-link"),g=q("IconLoading");return l(),i("div",ie,[s("div",de,[s("section",ce,[s("div",me,[y(c,{to:{name:"Home"},class:"self-center flex justify-center items-center md:w-1/3 lg:w-auto"},{default:N(()=>[pe]),_:1}),s("form",_e,[ue,s("div",fe,[s("div",ge,[we,d(s("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=r=>e.name=r),class:"form-input",name:"name",placeholder:"Name"},null,512),[[m,e.name]]),e.errors.name?(l(),i("span",he,p(e.errors.name),1)):_("",!0)]),s("div",ye,[be,d(s("input",{type:"mail","onUpdate:modelValue":o[1]||(o[1]=r=>e.email=r),class:"form-input font-mono",name:"email",placeholder:"Email",onBlur:o[2]||(o[2]=(...r)=>e.handleEmailBlur&&e.handleEmailBlur(...r))},null,544),[[m,e.email]]),e.errors.email?(l(),i("span",xe,p(e.errors.email),1)):_("",!0)]),s("div",ve,[Se,d(s("input",{type:"password","onUpdate:modelValue":o[3]||(o[3]=r=>e.password=r),class:"form-input font-mono",name:"password",placeholder:"Password"},null,512),[[m,e.password]]),e.errors.password?(l(),i("span",ke,p(e.errors.password),1)):_("",!0)]),s("div",Ee,[Ie,d(s("input",{type:"password","onUpdate:modelValue":o[4]||(o[4]=r=>e.confirmPassword=r),class:"form-input font-mono",name:"confirmPassword",placeholder:"Confirm Password"},null,512),[[m,e.confirmPassword]]),e.errors.confirmPassword?(l(),i("span",Pe,p(e.errors.confirmPassword),1)):_("",!0)])]),s("button",{type:"button",class:z(["flex justify-center items-center btn btn-primary mb-4 btn-register",e.getRegisterClass]),disabled:e.isScreenLoading,onClick:o[5]||(o[5]=(...r)=>e.onSubmit&&e.onSubmit(...r))},[Me,d(y(g,{class:"h-6 w-6 text-white ml-2"},null,512),[[O,e.isScreenLoading]])],10,Le),y(c,{to:{name:"Login"},class:"block text-center"},{default:N(()=>[Te]),_:1})])])])])])}const Be={name:"Register",components:{IconLoading:ae},setup(){const a=Q(),o={email:"",name:"",password:"",confirmPassword:""},b=se({name:u().required("\u8ACB\u586B\u5BEB \u540D\u7A31").min(2,"\u540D\u7A31\u6700\u5C11 2 \u500B\u5B57\u5143"),email:u().required("\u8ACB\u586B\u5BEB \u90F5\u4EF6\u4FE1\u7BB1").email("\u4FE1\u7BB1\u683C\u5F0F\u6709\u8AA4"),password:u().required("\u8ACB\u586B\u5BEB \u5BC6\u78BC").min(4,"\u5BC6\u78BC\u6700\u5C11 4 \u500B\u5B57\u5143"),confirmPassword:u().required("\u8ACB\u586B\u5BEB \u78BA\u8A8D\u5BC6\u78BC").oneOf([oe("password"),null],"\u5BC6\u78BC\u8F38\u5165\u4E0D\u4E00\u81F4")}),{errors:e,handleSubmit:x}=re({validationSchema:b,initialValues:o}),{value:v}=f("name"),{value:c}=f("email"),{value:g}=f("password"),{value:r}=f("confirmPassword"),F=Y(()=>U.value?["opacity-50","cursor-not-allowed","disabled:bg-gray-400","disabled:text-black"]:[]),X=async w=>{console.log("handleEmailBlur",w.target.value)},D=x(async(w,H)=>{var S,k,E,I,P,L,M,T,V,B,C,j;try{A(!0);const n=await Z.post("/api/v1/auth/register",w),R=(E=(k=(S=n.data)==null?void 0:S.data)==null?void 0:k.user)!=null?E:null,h=(L=(P=(I=n.data)==null?void 0:I.data)==null?void 0:P.token)!=null?L:null;$(R),ee(h),a.push({name:"Home"})}catch(n){if(((V=(T=(M=n.response)==null?void 0:M.data)==null?void 0:T.errorType)!=null?V:null)===le.EMAIL_EXISTS){const h=(j=(C=(B=n.response)==null?void 0:B.data)==null?void 0:C.message)!=null?j:"\u6B64 Mail \u5DF2\u8A3B\u518A\uFF01";H.setFieldError("email",h)}else console.error(n)}finally{A(!1)}});return{errors:e,name:v,email:c,password:g,confirmPassword:r,isScreenLoading:U,getRegisterClass:F,handleEmailBlur:X,onSubmit:D}}};var qe=K(Be,[["render",Ve],["__scopeId","data-v-828dd938"]]);export{qe as default};
