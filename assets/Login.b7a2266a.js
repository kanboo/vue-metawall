import{r as S,o as i,c,a as e,b as u,w as C,d as p,v as M,t as F,e as g,n as R,f as T,g as V,p as U,h as D,i as E,_ as W,I as J,u as K,j as O,k as Q,l as j,m as X,q as I,s as Y,x as Z,y as $}from"./index.2d0a35a1.js";import{c as ee,a as z,u as oe,b as H}from"./object.5e297ae0.js";import{_ as se}from"./img.0214c2a1.js";const l=a=>(U("data-v-ddc2dad8"),a=a(),D(),a),te={class:"login bg_pattern"},le={class:"container"},ae={class:"flex justify-center md:justify-content items-center min-h-screen"},ne={class:"border-2 border-black bg-gray flex flex-col md:flex-row justify-between gap-4 sm:gap-12 shadow-light px-4 py-6 md:py-16 md:px-12"},re=l(()=>e("img",{src:se,alt:"banner",class:"w-40 h-40 md:w-full md:h-full cursor-pointer"},null,-1)),ie={class:"w-full"},ce=l(()=>e("legend",{class:"mb-9"},[e("h1",{class:"text-center font-logo text-primary text-4xl md:text-6xl"},"MetaWall"),e("p",{class:"text-center font-bold text-xl md:text-2xl"},"\u5230\u5143\u5B87\u5B99\u5C55\u958B\u5168\u65B0\u793E\u4EA4\u5708")],-1)),de={class:"mb-8 space-y-4"},me={class:"form-control"},ue=l(()=>e("label",{for:"userEmail"},null,-1)),pe={key:0,class:"form-errorMsg register-style"},ge={class:"form-control"},_e=l(()=>e("label",{for:"userPassword"},null,-1)),he={key:0,class:"form-errorMsg register-style"},fe={key:0,class:"login-style form-errorMsg text-center"},be=["disabled"],we=l(()=>e("span",{class:"mr-2"},"\u767B\u5165",-1)),xe=l(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",class:"w-4 h-4 mr-2",viewBox:"0 0 48 48"},[e("defs",null,[e("path",{id:"a",d:"M44.5 20H24v8.5h11.8C34.7 33.9 30.1 37 24 37c-7.2 0-13-5.8-13-13s5.8-13 13-13c3.1 0 5.9 1.1 8.1 2.9l6.4-6.4C34.6 4.1 29.6 2 24 2 11.8 2 2 11.8 2 24s9.8 22 22 22c11 0 21-8 21-22 0-1.3-.2-2.7-.5-4z"})]),e("clipPath",{id:"b"},[e("use",{"xlink:href":"#a",overflow:"visible"})]),e("path",{"clip-path":"url(#b)",fill:"#FBBC05",d:"M0 37V11l17 13z"}),e("path",{"clip-path":"url(#b)",fill:"#EA4335",d:"M0 11l17 13 7-6.1L48 14V0H0z"}),e("path",{"clip-path":"url(#b)",fill:"#34A853",d:"M0 37l30-23 7.9 1L48 0v48H0z"}),e("path",{"clip-path":"url(#b)",fill:"#4285F4",d:"M48 48L17 24l-4-3 35-10z"})],-1)),ve=E("Google "),ye=[xe,ve],ke=l(()=>e("svg",{class:"w-5 h-5 fill-current",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[e("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})],-1)),Be=l(()=>e("span",null,"Facebook",-1)),Le=[ke,Be],Se=E(" \u8A3B\u518A\u5E33\u865F ");function Ce(a,s,_,o,h,f){const n=S("router-link"),d=S("IconLoading");return i(),c("div",te,[e("div",le,[e("section",ae,[e("div",ne,[u(n,{to:{name:"Home"},class:"self-center flex justify-center items-center md:w-1/3 lg:w-auto"},{default:C(()=>[re]),_:1}),e("form",ie,[ce,e("div",de,[e("div",me,[ue,p(e("input",{type:"mail","onUpdate:modelValue":s[0]||(s[0]=t=>o.email=t),class:"form-input font-mono",name:"userEmail",placeholder:"Email"},null,512),[[M,o.email]]),o.errors.email?(i(),c("span",pe,F(o.errors.email),1)):g("",!0)]),e("div",ge,[_e,p(e("input",{type:"password","onUpdate:modelValue":s[1]||(s[1]=t=>o.password=t),class:"form-input font-mono",name:"userPassword",placeholder:"Password"},null,512),[[M,o.password]]),o.errors.password?(i(),c("span",he,F(o.errors.password),1)):g("",!0)])]),o.isLoginFailed?(i(),c("p",fe," \u5E33\u865F\u6216\u5BC6\u78BC\u932F\u8AA4\uFF0C\u8ACB\u91CD\u65B0\u8F38\u5165\uFF01 ")):g("",!0),e("button",{type:"button",class:R(["flex justify-center items-center btn btn-primary mb-4 btn-login",o.getLoginBtnClass]),disabled:o.isScreenLoading,onClick:s[2]||(s[2]=(...t)=>o.onSubmit&&o.onSubmit(...t))},[we,p(u(d,{class:"h-6 w-6 text-white ml-2"},null,512),[[T,o.isScreenLoading]])],10,be),e("button",{class:"flex items-center justify-center w-full px-4 py-4 mb-4 text-sm text-black text-gray-800 border border-gray-500 rounded-lg hover:bg-blue-100 hover:bg-blue-200 focus:bg-blue-200",onClick:s[3]||(s[3]=V((...t)=>o.loginByGoogle&&o.loginByGoogle(...t),["prevent"]))},ye),e("button",{class:"w-full bg-blue-500 px-4 py-3 mb-4 font-semibold text-white inline-flex justify-center items-center space-x-2 rounded hover:opacity-80",onClick:s[4]||(s[4]=V((...t)=>o.loginByFacebook&&o.loginByFacebook(...t),["prevent"]))},Le),u(n,{to:{name:"Register"},class:"block text-center"},{default:C(()=>[Se]),_:1})])])])])])}const Me={name:"Login",components:{IconLoading:J},setup(){const a=K(),s=O(),_={email:"",password:""},o=ee({email:z().required("\u8ACB\u586B\u5BEB \u90F5\u4EF6\u4FE1\u7BB1").email("\u4FE1\u7BB1\u683C\u5F0F\u6709\u8AA4"),password:z().required("\u8ACB\u586B\u5BEB \u5BC6\u78BC")}),{errors:h,handleSubmit:f}=oe({validationSchema:o,initialValues:_}),{value:n}=H("email"),{value:d}=H("password"),t=Q(()=>j.value?["opacity-50","cursor-not-allowed","disabled:bg-gray-400","disabled:text-black"]:[]),m=X(!1),G=f(async P=>{var b,w,x,v,y,k,B,L;try{I(!0),m.value=!1;const r=await Y.post("/api/v1/auth/login",P),q=(x=(w=(b=r.data)==null?void 0:b.data)==null?void 0:w.user)!=null?x:null,N=(k=(y=(v=r.data)==null?void 0:v.data)==null?void 0:y.token)!=null?k:null;Z(q),$(N);const A=(L=(B=a.query)==null?void 0:B.redirect)!=null?L:"/";s.push(A)}catch(r){m.value=!0,console.error(r)}finally{I(!1)}});return{errors:h,email:n,password:d,isScreenLoading:j,getLoginBtnClass:t,isLoginFailed:m,onSubmit:G,loginByGoogle:()=>{window.location.href="https://meta-wall-server.kanboo.cc/auth/google/login"},loginByFacebook:()=>{window.location.href="https://meta-wall-server.kanboo.cc/auth/facebook/login"}}}};var He=W(Me,[["render",Ce],["__scopeId","data-v-ddc2dad8"]]);export{He as default};
