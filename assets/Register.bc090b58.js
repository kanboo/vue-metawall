import{r as R,o as l,c as i,a as s,b as y,w as q,d,v as m,t as p,e as _,n as H,f as Z,p as O,h as W,i as G,_ as J,j as K,k as Q,l as N,q as U,s as Y,x as $,y as ee}from"./index.8544f707.js";import{c as se,a as u,d as oe,u as re,b as f}from"./object.f072a29b.js";import{_ as ae,I as te}from"./img.71d8d0ca.js";const ne="EMAIL_EXISTS";var le={EMAIL_EXISTS:ne};const a=t=>(O("data-v-2f3e4cab"),t=t(),W(),t),ie={class:"register bg_pattern"},de={class:"container"},ce={class:"flex justify-center md:justify-content items-center min-h-screen"},me={class:"border-2 border-black bg-gray flex flex-col md:flex-row justify-between gap-4 sm:gap-12 shadow-light px-4 py-6 md:py-16 md:px-12"},pe=a(()=>s("img",{src:ae,alt:"banner",class:"hidden md:block cursor-pointer"},null,-1)),_e={class:"w-full"},ue=a(()=>s("legend",{class:"mb-9 cursor-pointer"},[s("h1",{class:"text-center font-logo text-primary text-4xl md:text-6xl"},"MetaWall"),s("p",{class:"text-center font-bold text-xl md:text-2xl"},"\u8A3B\u518A")],-1)),fe={class:"mb-8 space-y-4"},ge={class:"form-control"},we=a(()=>s("label",{for:"name"},null,-1)),he={key:0,class:"form-errorMsg register-style"},ye={class:"form-control"},be=a(()=>s("label",{for:"email"},null,-1)),xe={key:0,class:"form-errorMsg register-style"},ve={class:"form-control"},Se=a(()=>s("label",{for:"password"},null,-1)),ke={key:0,class:"form-errorMsg register-style"},Ee={class:"form-control"},Ie=a(()=>s("label",{for:"confirmPassword"},null,-1)),Pe={key:0,class:"form-errorMsg register-style"},Le=["disabled"],Me=a(()=>s("span",{class:"mr-2"},"\u8A3B\u518A",-1)),Te=G(" \u767B\u5165 ");function Ve(t,o,b,e,x,v){const c=R("router-link"),g=R("IconLoading");return l(),i("div",ie,[s("div",de,[s("section",ce,[s("div",me,[y(c,{to:{name:"Home"},class:"self-center flex justify-center items-center md:w-1/3 lg:w-auto"},{default:q(()=>[pe]),_:1}),s("form",_e,[ue,s("div",fe,[s("div",ge,[we,d(s("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=r=>e.name=r),class:"form-input",name:"name",placeholder:"Name"},null,512),[[m,e.name]]),e.errors.name?(l(),i("span",he,p(e.errors.name),1)):_("",!0)]),s("div",ye,[be,d(s("input",{type:"mail","onUpdate:modelValue":o[1]||(o[1]=r=>e.email=r),class:"form-input font-mono",name:"email",placeholder:"Email",onBlur:o[2]||(o[2]=(...r)=>e.handleEmailBlur&&e.handleEmailBlur(...r))},null,544),[[m,e.email]]),e.errors.email?(l(),i("span",xe,p(e.errors.email),1)):_("",!0)]),s("div",ve,[Se,d(s("input",{type:"password","onUpdate:modelValue":o[3]||(o[3]=r=>e.password=r),class:"form-input font-mono",name:"password",placeholder:"Password"},null,512),[[m,e.password]]),e.errors.password?(l(),i("span",ke,p(e.errors.password),1)):_("",!0)]),s("div",Ee,[Ie,d(s("input",{type:"password","onUpdate:modelValue":o[4]||(o[4]=r=>e.confirmPassword=r),class:"form-input font-mono",name:"confirmPassword",placeholder:"Confirm Password"},null,512),[[m,e.confirmPassword]]),e.errors.confirmPassword?(l(),i("span",Pe,p(e.errors.confirmPassword),1)):_("",!0)])]),s("button",{type:"button",class:H(["flex justify-center items-center btn btn-primary mb-4 btn-register",e.getRegisterClass]),disabled:e.isScreenLoading,onClick:o[5]||(o[5]=(...r)=>e.onSubmit&&e.onSubmit(...r))},[Me,d(y(g,{class:"h-6 w-6 text-white ml-2"},null,512),[[Z,e.isScreenLoading]])],10,Le),y(c,{to:{name:"Login"},class:"block text-center"},{default:q(()=>[Te]),_:1})])])])])])}const Be={name:"Register",components:{IconLoading:te},setup(){const t=K(),o={email:"",name:"",password:"",confirmPassword:""},b=se({name:u().required("\u8ACB\u586B\u5BEB \u540D\u7A31").min(2,"\u540D\u7A31\u6700\u5C11 2 \u500B\u5B57\u5143"),email:u().required("\u8ACB\u586B\u5BEB \u90F5\u4EF6\u4FE1\u7BB1").email("\u4FE1\u7BB1\u683C\u5F0F\u6709\u8AA4"),password:u().required("\u8ACB\u586B\u5BEB \u5BC6\u78BC").matches(/^(?=.*[a-zA-Z])(?=.*\d)[a-zA-Z0-9]{8,}$/,"\u5BC6\u78BC\u9700\u81F3\u5C11 8 \u78BC\u4EE5\u4E0A\uFF0C\u4E26\u4E2D\u82F1\u6DF7\u5408\uFF0C\u4E0D\u53EF\u4EE5\u8F38\u5165\u7A7A\u767D\u5B57\u5143\u3001\u7279\u6B8A\u7B26\u865F"),confirmPassword:u().required("\u8ACB\u586B\u5BEB \u78BA\u8A8D\u5BC6\u78BC").oneOf([oe("password"),null],"\u5BC6\u78BC\u8F38\u5165\u4E0D\u4E00\u81F4")}),{errors:e,handleSubmit:x}=re({validationSchema:b,initialValues:o}),{value:v}=f("name"),{value:c}=f("email"),{value:g}=f("password"),{value:r}=f("confirmPassword"),z=Q(()=>N.value?["opacity-50","cursor-not-allowed","disabled:bg-gray-400","disabled:text-black"]:[]),F=async w=>{console.log("handleEmailBlur",w.target.value)},X=x(async(w,D)=>{var S,k,E,I,P,L,M,T,V,B,C,j;try{U(!0);const n=await Y.post("/api/v1/auth/register",w),A=(E=(k=(S=n.data)==null?void 0:S.data)==null?void 0:k.user)!=null?E:null,h=(L=(P=(I=n.data)==null?void 0:I.data)==null?void 0:P.token)!=null?L:null;$(A),ee(h),t.push({name:"Home"})}catch(n){if(((V=(T=(M=n.response)==null?void 0:M.data)==null?void 0:T.errorType)!=null?V:null)===le.EMAIL_EXISTS){const h=(j=(C=(B=n.response)==null?void 0:B.data)==null?void 0:C.message)!=null?j:"\u6B64 Mail \u5DF2\u8A3B\u518A\uFF01";D.setFieldError("email",h)}else console.error(n)}finally{U(!1)}});return{errors:e,name:v,email:c,password:g,confirmPassword:r,isScreenLoading:N,getRegisterClass:z,handleEmailBlur:F,onSubmit:X}}};var Re=J(Be,[["render",Ve],["__scopeId","data-v-2f3e4cab"]]);export{Re as default};
